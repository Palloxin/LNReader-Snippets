//Cleaning of quotation marks contexts
chapter = document.querySelector('#LNReader-chapter');
chapter.innerHTML = chapter.innerHTML
.replace(/(?:<span>(?:[^<]*<(?!(?:span|\/?p)>))+\/span>(?:[^<]*<(?!\/?(?:p|span)>)[^>]+>)*){2,}/g, _ => `${_.replace(/<\/span>(.*?)<span>/g, '$1')}`)//span clog - https://jsbench.me/w0m9jpmj80
//â†“â†“â†“â†“quotation marks => DOUBLE PRIME 
.replace(/â€œ(?<=\bthe â€œ)([\s\-\wâ€™]+)([\!])?â€/g, 'â€³$1â€³$2')
.replace(/[â€â€œ\"](?<=\w .)(\w+|[\?\!])[â€\"]/g, 'â€³$1â€³')
.replace(/â€œ(?<=\w â€œ)(\w+\s\w+)â€(?= [a-z])/g, 'â€³$1â€³')
.replace(/â€œ(?<=[a-z] â€œ)([a-z]+\s[a-z]+)â€(?= [A-Za-z])/g, 'â€³$1â€³')
.replace(/(â€œ\S[^\"â€â€œ<]+\s)â€œ([\s\wâ€™]+)â€(?=\W[^\"â€â€œ<]*?â€)/g, '$1â€³$2â€³')
.replace(/[â€œ\"](?<=[a-z] [â€œ\"])([a-z\sâ€™]+(?<!â€™))[â€\"]/g, 'â€³$1â€³')
.replace(/\"(?<=\b(?:or|as?|the|to) \")([A-Za-zâ€™\s]+)\"/g, 'â€³$1â€³')
///â†‘â†‘â†‘â†‘
////â†“â†“â†“â†“â†“ â€” 
.replace(/(?:â€˜|â€™(?<![\.,\?!â€¦]â€™)(?![a-z]*\s))([^\"â€â€œ\'â€™â€˜\<]+)(?:(?<!\s)â€˜|â€™(?![a-z]))/g, 'â€˜$1â€™')//test-strings: ``Canâ€™t u do the â€™jobâ€™?``|||``â€˜He said â€˜somethingâ€™!â€™``|||``â€˜We donâ€™t!â€™ They said on the Merfolk Piratesâ€™ deck.``|||
.replace(/â€\b(?<![\s\>\,]â€)/g, 'â€ ')// \b => (?=\w)
.replace(/â€œâ€œ[^â€œâ€\"]+â€â€/g, 'Ã—Ã·Ã—$&')
.replace(/â€(?<=(?:<p>|, |â€|\: ?|\. |â€“|[^>]â€œ[^â€â€“â€”]+[â€“â€”])â€)/g, 'â€œ')
.replace(/[â€œâ€˜](?=(?:<\/[^>]+>\s*)*<(?:\/p>|br>\s*<br>))/g, a => a==='â€œ'?'â€':'â€™')
.replace(/â€™(?<=(?:<p>|, )â€™)/g, 'â€˜')
.replace(/â€™(?=\w\w\w+)(?<![\s\w]â€™)/g, 'â€™ ')
//.replace(/(?: ([\â€â€™])|([\â€œâ€˜]) )/g, '$1$2')
.replace(/([\?\!\.\â€¦]+)(?<=\w\1)(?=[\"â€â€œ][\"â€â€œ](?<!\"\")\w)/g, '$1âˆ†âˆ†')
.replace(/âˆ†âˆ†[\"â€â€œ][\"â€â€œ]/g, 'â€ â€œ')
.replace(/[\"â€â€œ][\"â€â€œ](?<!\"\"|â€â€œ)/g, '\"')
.replace(/â€œ(?<![\s\[\ã€\ã€Œ\>]â€œ)/g, ' â€œ')
.replace(/(â€œ[^\"â€â€œ<>\â€”\â€“]+[\â€”\â€“]) \â€œ(?=\S)/, '$1â€ ')
.replace(/Ã—Ã·Ã—[â€œâ€\"]+([^â€â€œ\"<]+)[â€â€œ\"\s]+/g, 'â€œâ€œ$1â€â€')
//â†“simulation to check the pairs
.replace(/<(?=\/?(?:p|div|h[1-9r]|br>\s*<br)(?:>| [^>]+>))/g, 'ğ›– <')//\u1b5a0
.replace(/=\"([^\"]+)\"(?=[> ])/g, '=Ã·Â°Ã·\'$1Ã·Â°Ã·\'')
.replace(/([\"â€œâ€](?!\s?[\"â€œâ€])[^\"â€œâ€ğ›– ]+[\"â€])/g, 'âˆ…Â¢$1âˆ…Â¢')
.replace(/âˆ…Â¢[\"â€œâ€]\s/g, ' \â€œ')
.replace(/\"âˆ…Â¢(?=[A-Za-z])/g, '$& ')
.replace(/, \.âˆ…Â¢\s*/g, 'âˆ…Â¢')
.replace(/Ã·Â°Ã·\'/g, '\"')
.replace(/âˆ…Â¢/g, '')
.replace(/ğ›– /g, '')
//â†‘
.replace(/â€\b(?<![\>\,]â€)/g, 'â€ ')// \b => (?=\w)
////â†‘â†‘â†‘â†‘â†‘

///////â†“â†“â†“â†“ â€” Dialogue highlighter
chapter = document.querySelector('#LNReader-chapter');
chapter.innerHTML = chapter.innerHTML
.replace(/<(?=\/?(?:p|div|h[1-9r]|br>\s*<br)[> ])/g, 'ğ›– <')//\u1b5a0
.replace(/=\"([^\"]+)\"(?=[> ])/g, '=Ã·Â°Ã·\'$1Ã·Â°Ã·\'')
.replace(/[\"â€œâ€](?!\s?[\"â€œâ€])[^\"â€œâ€ğ›– ]+[\"â€]/g, _ => `âˆ†âˆ†${_.replace(/(<[^\/!][^>]*>)([^<\"â€\w]*[\"â€])/, '$2Â¶Â¶$1')}`)//move open tag near end of dialogue
.replace(/âˆ†âˆ†[\"â€œâ€]((?:\s*<\/[^>]+>)+)?([^\"â€œâ€ğ›– ]+)[\"â€](?:Â¶Â¶(<[^>]+>))?/g, `"$1<span style=Ã·Â°Ã·\'color: #FFFFEBÃ·Â°Ã·\'>$2<\/span>$3â "`)//u2060
.replace(/â€œ\"â <([^â€â€œ\"]+)\"â€/g, 'â€œâ€œâ <$1â€â€')
.replace(/[\u2033]/g, '\"')
.replace(/Ã·Â°Ã·\'/g, '\"')
.replace(/ğ›– /g, '');
//////â†‘â†‘â†‘â†‘ â€” END - https://jsfiddle.net/L6pskwc2/2/
