//Cleaning of quotation marks contexts
//â†“â†“â†“â†“quotation marks => DOUBLE PRIME 
chapter = document.querySelector('#LNReader-chapter');
chapter.innerHTML = chapter.innerHTML
.replace(/â€œ(?<=\bthe â€œ)([\s\-\wâ€™]+)([\!])?â€/g, 'â€³$1â€³$2')
.replace(/[â€â€œ\"](?<=\w .)(\w+|[\?\!])[â€\"]/g, 'â€³$1â€³')
.replace(/â€œ(?<=\w â€œ)(\w+\s\w+)â€(?= [a-z])/g, 'â€³$1â€³')
.replace(/â€œ(?<=[a-z] â€œ)([a-z]+\s[a-z]+)â€(?= [A-Za-z])/g, 'â€³$1â€³')
.replace(/(â€œ\S[^\"â€â€œ<]+\s)â€œ([\s\wâ€™]+)â€(?=\W[^\"â€â€œ<]*?â€)/g, '$1â€³$2â€³')
.replace(/[â€œ\"](?<=[a-z] [â€œ\"])([a-z\sâ€™]+(?<!â€™))[â€\"]/g, 'â€³$1â€³')
.replace(/\"(?<=\b(?:or|as?|the|to) \")([A-Za-zâ€™\s]+)\"/g, 'â€³$1â€³')
///â†‘â†‘â†‘â†‘
////â†“â†“â†“â†“â†“ â€” 
.replace(/(?:â€˜|â€™(?<![\.,\?!â€¦]â€™)(?![a-z]*\s))([^\"â€â€œ\'â€™â€˜\<]+)(?:(?<!\s)â€˜|â€™(?![a-z]))/g, 'â€˜$1â€™')//test-strings: ``Canâ€™t u do the â€™jobâ€™?``|||``â€˜He said â€˜somethingâ€™!â€™``|||``â€˜We donâ€™t!â€™ They said on the Merfolk Piratesâ€™ deck.``|||
.replace(/â€(?=\w)(?<![\s\>\,]â€)/g, 'â€ ')
.replace(/â€(?<=(?:<p>|, |â€|\: ?|\. |â€“|[^>]â€œ[^â€â€“â€”]+[â€“â€”])â€)/g, 'â€œ')
.replace(/[â€œâ€˜](?=<\/p>)/g, a => a === 'â€œ' ? 'â€' : 'â€™' )
.replace(/â€™(?<=(?:<p>|, )â€™)/g, 'â€˜')
.replace(/â€™(?=\w\w\w+)(?<![\s\w]â€™)/g, 'â€™ ')
.replace(/[\"â€œ][\"â€â€œ](?<=<p>..)/g, 'â€œ')
.replace(/([\?\!\.\â€¦]+)(?<=\w\1)(?=[\"â€â€œ][\"â€â€œ](?<!\"\")\w)/g, '$1âˆ†âˆ†')
.replace(/âˆ†âˆ†[\"â€â€œ][\"â€â€œ]/g, 'â€ â€œ')
.replace(/[\"â€â€œ][\"â€â€œ](?<!\"\"|â€â€œ)/g, '\"')
.replace(/â€œ(?<![\s\[\ã€\ã€Œ\>]â€œ)/g, ' â€œ')
.replace(/(â€œ[^\"â€â€œ<>\â€”\â€“]+[\â€”\â€“]) \â€œ(?!\s)/, '$1â€ ')
//â†“simulation to check the pairs
.replace(/([\"â€œâ€](?<!\=\")(?!\s?[\"â€œâ€>]|<\/| [a-z\-]+=\")(?:<?[^\"â€œâ€<]+?(?:<[^\"â€œâ€<]+?)?)(?:<br>[^\"â€œâ€<]+)?([\"â€]|â€œ(?!\s)))/g, 'âˆ…Â¢$1âˆ…Â¢')
.replace(/âˆ…Â¢[\"â€œâ€](\,)?\s/g, '$1 \â€œ')
.replace(/\"âˆ…Â¢(?=[A-Za-z])/g, '$& ')
.replace(/, \.âˆ…Â¢\s*/g, 'âˆ…Â¢')
.replace(/âˆ…Â¢/g, '')
//â†‘
.replace(/â€(?=\w)(?<![\>\,]â€)/g, 'â€ ')
////â†‘â†‘â†‘â†‘â†‘

///////â†“â†“â†“â†“ â€” Dialogue highlighter
chapter = document.querySelector('#LNReader-chapter');
chapter.innerHTML = chapter.innerHTML
.replace(/<\/?(?:p|div|h[1-9r]|br>\s*<br)>/g, 'ğ›– $&')//\u1b5a0
.replace(/(=\"[^\"]+)\" /g, '$1ğ›– \" ')
.replace(/[\"â€œâ€](?<!\=\")(?!>|\s?[\"â€œâ€]| [a-z\-]+=\"|<ww)([^\"â€œâ€ğ›– ]+?)(<br>[^\"â€œâ€'ğ›– ]+)?[\"â€](?<!=\"| [a-z\-]+=\"|ww>\")(?![^ğ›– ]+<(?:p|div|h[1-9]|br>\s*<br)>)/g, `"<ww>$1$2</ww>"`)
.replace(/[\u2033]/g, '\"')
.replace(/ğ›– /g, '');
//////â†‘â†‘â†‘â†‘ â€” END
